function cov_ub65j9lfh(){var path="C:\\Users\\Sudipta.Barua\\Downloads\\final project all things done without nodemodule\\final project all things done without nodemodule\\server\\royaltyAndPayments\\repositories\\royaltyRepository.js";var hash="40230f437bea6ea890f528e42a56206b9f81cdb5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Sudipta.Barua\\Downloads\\final project all things done without nodemodule\\final project all things done without nodemodule\\server\\royaltyAndPayments\\repositories\\royaltyRepository.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:49}},"1":{start:{line:2,column:11},end:{line:2,column:41}},"2":{start:{line:3,column:15},end:{line:3,column:47}},"3":{start:{line:8,column:24},end:{line:8,column:64}},"4":{start:{line:10,column:8},end:{line:10,column:36}},"5":{start:{line:15,column:8},end:{line:15,column:52}},"6":{start:{line:20,column:8},end:{line:20,column:97}},"7":{start:{line:24,column:8},end:{line:24,column:54}},"8":{start:{line:28,column:8},end:{line:31,column:10}},"9":{start:{line:36,column:0},end:{line:36,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:44},end:{line:11,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:30},end:{line:16,column:5}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:4},end:{line:19,column:5}},loc:{start:{line:19,column:35},end:{line:21,column:5}},line:19},"3":{name:"(anonymous_3)",decl:{start:{line:23,column:4},end:{line:23,column:5}},loc:{start:{line:23,column:40},end:{line:25,column:5}},line:23},"4":{name:"(anonymous_4)",decl:{start:{line:27,column:4},end:{line:27,column:5}},loc:{start:{line:27,column:102},end:{line:32,column:5}},line:27}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"40230f437bea6ea890f528e42a56206b9f81cdb5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ub65j9lfh=function(){return actualCoverage;};}return actualCoverage;}cov_ub65j9lfh();const Royalty=(cov_ub65j9lfh().s[0]++,require('../models/royaltyModel'));const Song=(cov_ub65j9lfh().s[1]++,require('../models/songModel'));const Artist=(cov_ub65j9lfh().s[2]++,require('../models/artistModel'));class RoyaltyRepository{// Create a new royalty
async create(royaltyId,artistId,songId){cov_ub65j9lfh().f[0]++;const royalty=(cov_ub65j9lfh().s[3]++,new Royalty({royaltyId,artistId,songId}));cov_ub65j9lfh().s[4]++;return await royalty.save();}// Get royalty by ID
async findById(royaltyId){cov_ub65j9lfh().f[1]++;cov_ub65j9lfh().s[5]++;return await Royalty.findOne({royaltyId});}// Get royalties by artist ID
async findByArtistId(artistId){cov_ub65j9lfh().f[2]++;cov_ub65j9lfh().s[6]++;return await Royalty.find({artistId:artistId}).populate('artistId').populate('songId');}async findSongsByArtistId(artistId){cov_ub65j9lfh().f[3]++;cov_ub65j9lfh().s[7]++;return await Song.find({artistId:artistId});}async updateArtistRoyalty(artistId,fullRoyalty,totalRoyaltyPaid,totalRoyaltyDue,totalStreams){cov_ub65j9lfh().f[4]++;cov_ub65j9lfh().s[8]++;return await Artist.findOneAndUpdate({_id:artistId},{fullRoyalty,totalRoyaltyPaid,totalRoyaltyDue,totalStreams});}}cov_ub65j9lfh().s[9]++;module.exports=RoyaltyRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfdWI2NWo5bGZoIiwiYWN0dWFsQ292ZXJhZ2UiLCJSb3lhbHR5IiwicyIsInJlcXVpcmUiLCJTb25nIiwiQXJ0aXN0IiwiUm95YWx0eVJlcG9zaXRvcnkiLCJjcmVhdGUiLCJyb3lhbHR5SWQiLCJhcnRpc3RJZCIsInNvbmdJZCIsImYiLCJyb3lhbHR5Iiwic2F2ZSIsImZpbmRCeUlkIiwiZmluZE9uZSIsImZpbmRCeUFydGlzdElkIiwiZmluZCIsInBvcHVsYXRlIiwiZmluZFNvbmdzQnlBcnRpc3RJZCIsInVwZGF0ZUFydGlzdFJveWFsdHkiLCJmdWxsUm95YWx0eSIsInRvdGFsUm95YWx0eVBhaWQiLCJ0b3RhbFJveWFsdHlEdWUiLCJ0b3RhbFN0cmVhbXMiLCJmaW5kT25lQW5kVXBkYXRlIiwiX2lkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInJveWFsdHlSZXBvc2l0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJveWFsdHkgPSByZXF1aXJlKCcuLi9tb2RlbHMvcm95YWx0eU1vZGVsJyk7XHJcbmNvbnN0IFNvbmc9cmVxdWlyZSgnLi4vbW9kZWxzL3NvbmdNb2RlbCcpO1xyXG5jb25zdCBBcnRpc3QgPSByZXF1aXJlKCcuLi9tb2RlbHMvYXJ0aXN0TW9kZWwnKTtcclxuXHJcbmNsYXNzIFJveWFsdHlSZXBvc2l0b3J5IHtcclxuICAgIC8vIENyZWF0ZSBhIG5ldyByb3lhbHR5XHJcbiAgICBhc3luYyBjcmVhdGUocm95YWx0eUlkLGFydGlzdElkLHNvbmdJZCkge1xyXG4gICAgICAgIGNvbnN0IHJveWFsdHkgPSBuZXcgUm95YWx0eSh7cm95YWx0eUlkLGFydGlzdElkLHNvbmdJZH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgcm95YWx0eS5zYXZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHJveWFsdHkgYnkgSURcclxuICAgIGFzeW5jIGZpbmRCeUlkKHJveWFsdHlJZCkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBSb3lhbHR5LmZpbmRPbmUoeyByb3lhbHR5SWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHJveWFsdGllcyBieSBhcnRpc3QgSURcclxuICAgIGFzeW5jIGZpbmRCeUFydGlzdElkKGFydGlzdElkKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFJveWFsdHkuZmluZCh7IGFydGlzdElkOmFydGlzdElkIH0pLnBvcHVsYXRlKCdhcnRpc3RJZCcpLnBvcHVsYXRlKCdzb25nSWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kU29uZ3NCeUFydGlzdElkKGFydGlzdElkKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFNvbmcuZmluZCh7IGFydGlzdElkOmFydGlzdElkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZUFydGlzdFJveWFsdHkoYXJ0aXN0SWQsIGZ1bGxSb3lhbHR5LCB0b3RhbFJveWFsdHlQYWlkLCB0b3RhbFJveWFsdHlEdWUsIHRvdGFsU3RyZWFtcykge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBBcnRpc3QuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgICAgICAgeyBfaWQ6IGFydGlzdElkIH0sXHJcbiAgICAgICAgICAgIHsgZnVsbFJveWFsdHksIHRvdGFsUm95YWx0eVBhaWQsIHRvdGFsUm95YWx0eUR1ZSwgdG90YWxTdHJlYW1zIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSb3lhbHR5UmVwb3NpdG9yeTtcclxuIl0sIm1hcHBpbmdzIjoidXNFQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLHdCQUF3QixDQUFDLEVBQ2pELEtBQU0sQ0FBQUMsSUFBSSxFQUFBTCxhQUFBLEdBQUFHLENBQUEsTUFBQ0MsT0FBTyxDQUFDLHFCQUFxQixDQUFDLEVBQ3pDLEtBQU0sQ0FBQUUsTUFBTSxFQUFBTixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDLEVBRS9DLEtBQU0sQ0FBQUcsaUJBQWtCLENBQ3BCO0FBQ0EsS0FBTSxDQUFBQyxNQUFNQSxDQUFDQyxTQUFTLENBQUNDLFFBQVEsQ0FBQ0MsTUFBTSxDQUFFLENBQUFYLGFBQUEsR0FBQVksQ0FBQSxNQUNwQyxLQUFNLENBQUFDLE9BQU8sRUFBQWIsYUFBQSxHQUFBRyxDQUFBLE1BQUcsR0FBSSxDQUFBRCxPQUFPLENBQUMsQ0FBQ08sU0FBUyxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxDQUFDLEVBQUNYLGFBQUEsR0FBQUcsQ0FBQSxNQUV6RCxNQUFPLE1BQU0sQ0FBQVUsT0FBTyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUMvQixDQUVBO0FBQ0EsS0FBTSxDQUFBQyxRQUFRQSxDQUFDTixTQUFTLENBQUUsQ0FBQVQsYUFBQSxHQUFBWSxDQUFBLE1BQUFaLGFBQUEsR0FBQUcsQ0FBQSxNQUN0QixNQUFPLE1BQU0sQ0FBQUQsT0FBTyxDQUFDYyxPQUFPLENBQUMsQ0FBRVAsU0FBVSxDQUFDLENBQUMsQ0FDL0MsQ0FFQTtBQUNBLEtBQU0sQ0FBQVEsY0FBY0EsQ0FBQ1AsUUFBUSxDQUFFLENBQUFWLGFBQUEsR0FBQVksQ0FBQSxNQUFBWixhQUFBLEdBQUFHLENBQUEsTUFDM0IsTUFBTyxNQUFNLENBQUFELE9BQU8sQ0FBQ2dCLElBQUksQ0FBQyxDQUFFUixRQUFRLENBQUNBLFFBQVMsQ0FBQyxDQUFDLENBQUNTLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQ0EsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUM1RixDQUVBLEtBQU0sQ0FBQUMsbUJBQW1CQSxDQUFDVixRQUFRLENBQUUsQ0FBQVYsYUFBQSxHQUFBWSxDQUFBLE1BQUFaLGFBQUEsR0FBQUcsQ0FBQSxNQUNoQyxNQUFPLE1BQU0sQ0FBQUUsSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBRVIsUUFBUSxDQUFDQSxRQUFTLENBQUMsQ0FBQyxDQUNqRCxDQUVBLEtBQU0sQ0FBQVcsbUJBQW1CQSxDQUFDWCxRQUFRLENBQUVZLFdBQVcsQ0FBRUMsZ0JBQWdCLENBQUVDLGVBQWUsQ0FBRUMsWUFBWSxDQUFFLENBQUF6QixhQUFBLEdBQUFZLENBQUEsTUFBQVosYUFBQSxHQUFBRyxDQUFBLE1BQzlGLE1BQU8sTUFBTSxDQUFBRyxNQUFNLENBQUNvQixnQkFBZ0IsQ0FDaEMsQ0FBRUMsR0FBRyxDQUFFakIsUUFBUyxDQUFDLENBQ2pCLENBQUVZLFdBQVcsQ0FBRUMsZ0JBQWdCLENBQUVDLGVBQWUsQ0FBRUMsWUFBYSxDQUNuRSxDQUFDLENBQ0wsQ0FFSixDQUFDekIsYUFBQSxHQUFBRyxDQUFBLE1BRUR5QixNQUFNLENBQUNDLE9BQU8sQ0FBR3RCLGlCQUFpQiIsImlnbm9yZUxpc3QiOltdfQ==