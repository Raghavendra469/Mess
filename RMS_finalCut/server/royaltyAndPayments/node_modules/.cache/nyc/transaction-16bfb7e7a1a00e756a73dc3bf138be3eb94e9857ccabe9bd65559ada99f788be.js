function cov_11kf574q0l(){var path="C:\\Users\\Sudipta.Barua\\Downloads\\final project all things done without nodemodule\\final project all things done without nodemodule\\server\\royaltyAndPayments\\models\\transaction.js";var hash="d47b6468c52dad66cc8bcfb7bb7f8937aa467d12";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Sudipta.Barua\\Downloads\\final project all things done without nodemodule\\final project all things done without nodemodule\\server\\royaltyAndPayments\\models\\transaction.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:0},end:{line:2,column:34}},"2":{start:{line:3,column:0},end:{line:3,column:31}},"3":{start:{line:5,column:26},end:{line:16,column:2}},"4":{start:{line:19,column:0},end:{line:24,column:3}},"5":{start:{line:20,column:2},end:{line:22,column:3}},"6":{start:{line:21,column:4},end:{line:21,column:45}},"7":{start:{line:23,column:2},end:{line:23,column:9}},"8":{start:{line:26,column:0},end:{line:26,column:81}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:46},end:{line:24,column:1}},line:19}},branchMap:{"0":{loc:{start:{line:20,column:2},end:{line:22,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:22,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:20}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d47b6468c52dad66cc8bcfb7bb7f8937aa467d12"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_11kf574q0l=function(){return actualCoverage;};}return actualCoverage;}cov_11kf574q0l();const mongoose=(cov_11kf574q0l().s[0]++,require('mongoose'));cov_11kf574q0l().s[1]++;require('../models/royaltyModel');// Import Royalty model
cov_11kf574q0l().s[2]++;require('../models/userModel');// Import User model
const TransactionSchema=(cov_11kf574q0l().s[3]++,new mongoose.Schema({userId:{type:mongoose.Schema.Types.ObjectId,ref:'Artist',required:[true,"userId is required"]},royaltyId:{type:mongoose.Schema.Types.ObjectId,ref:'Royalty',required:[true,"royaltyId is required"]},songId:{type:mongoose.Schema.Types.ObjectId,ref:'Song',required:true},transactionAmount:{type:Number,required:[true,"transactionAmount is required"],min:[1,"Amount must be greater than zero"]},royaltyPaid:{type:Number,default:0},// Amount paid to the artist
royaltyDue:{type:Number,default:0},// Amount pending to be paid
artistShare:{type:Number,default:0},managerShare:{type:Number,default:0},status:{type:String,enum:['Pending','Approved','Rejected'],default:'Pending'},transactionDate:{type:Date,default:Date.now}}));// Pre-save logic to initialize royaltyDue as the transactionAmount
cov_11kf574q0l().s[4]++;TransactionSchema.pre('save',function(next){cov_11kf574q0l().f[0]++;cov_11kf574q0l().s[5]++;if(this.isNew){cov_11kf574q0l().b[0][0]++;cov_11kf574q0l().s[6]++;this.royaltyDue=this.transactionAmount;// Set initial due amount to the transaction amount
}else{cov_11kf574q0l().b[0][1]++;}cov_11kf574q0l().s[7]++;next();});cov_11kf574q0l().s[8]++;module.exports=mongoose.model('Transaction',TransactionSchema,'Transaction');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTFrZjU3NHEwbCIsImFjdHVhbENvdmVyYWdlIiwibW9uZ29vc2UiLCJzIiwicmVxdWlyZSIsIlRyYW5zYWN0aW9uU2NoZW1hIiwiU2NoZW1hIiwidXNlcklkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsInJveWFsdHlJZCIsInNvbmdJZCIsInRyYW5zYWN0aW9uQW1vdW50IiwiTnVtYmVyIiwibWluIiwicm95YWx0eVBhaWQiLCJkZWZhdWx0Iiwicm95YWx0eUR1ZSIsImFydGlzdFNoYXJlIiwibWFuYWdlclNoYXJlIiwic3RhdHVzIiwiU3RyaW5nIiwiZW51bSIsInRyYW5zYWN0aW9uRGF0ZSIsIkRhdGUiLCJub3ciLCJwcmUiLCJuZXh0IiwiZiIsImlzTmV3IiwiYiIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VzIjpbInRyYW5zYWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxucmVxdWlyZSgnLi4vbW9kZWxzL3JveWFsdHlNb2RlbCcpOyAvLyBJbXBvcnQgUm95YWx0eSBtb2RlbFxyXG5yZXF1aXJlKCcuLi9tb2RlbHMvdXNlck1vZGVsJyk7ICAgIC8vIEltcG9ydCBVc2VyIG1vZGVsXHJcblxyXG5jb25zdCBUcmFuc2FjdGlvblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIHVzZXJJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ0FydGlzdCcsIHJlcXVpcmVkOiBbdHJ1ZSwgXCJ1c2VySWQgaXMgcmVxdWlyZWRcIl0gfSxcclxuICByb3lhbHR5SWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdSb3lhbHR5JywgcmVxdWlyZWQ6IFt0cnVlLCBcInJveWFsdHlJZCBpcyByZXF1aXJlZFwiXSB9LFxyXG4gIHNvbmdJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1NvbmcnLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIHRyYW5zYWN0aW9uQW1vdW50OiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IFt0cnVlLCBcInRyYW5zYWN0aW9uQW1vdW50IGlzIHJlcXVpcmVkXCJdLCBtaW46IFsxLCBcIkFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvXCJdIH0sXHJcbiAgcm95YWx0eVBhaWQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sICAvLyBBbW91bnQgcGFpZCB0byB0aGUgYXJ0aXN0XHJcbiAgcm95YWx0eUR1ZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSwgICAvLyBBbW91bnQgcGVuZGluZyB0byBiZSBwYWlkXHJcbiAgYXJ0aXN0U2hhcmU6e3R5cGU6TnVtYmVyLCBkZWZhdWx0OjB9LFxyXG4gIG1hbmFnZXJTaGFyZTp7dHlwZTpOdW1iZXIsIGRlZmF1bHQ6MH0sXHJcbiAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZW51bTogWydQZW5kaW5nJywgJ0FwcHJvdmVkJywgJ1JlamVjdGVkJ10sIGRlZmF1bHQ6ICdQZW5kaW5nJyB9LFxyXG4gIHRyYW5zYWN0aW9uRGF0ZTogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9XHJcbn0pO1xyXG5cclxuLy8gUHJlLXNhdmUgbG9naWMgdG8gaW5pdGlhbGl6ZSByb3lhbHR5RHVlIGFzIHRoZSB0cmFuc2FjdGlvbkFtb3VudFxyXG5UcmFuc2FjdGlvblNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbiAobmV4dCkge1xyXG4gIGlmICh0aGlzLmlzTmV3KSB7XHJcbiAgICB0aGlzLnJveWFsdHlEdWUgPSB0aGlzLnRyYW5zYWN0aW9uQW1vdW50OyAvLyBTZXQgaW5pdGlhbCBkdWUgYW1vdW50IHRvIHRoZSB0cmFuc2FjdGlvbiBhbW91bnRcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ1RyYW5zYWN0aW9uJywgVHJhbnNhY3Rpb25TY2hlbWEsICdUcmFuc2FjdGlvbicpO1xyXG4iXSwibWFwcGluZ3MiOiIydkRBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFBRSxRQUFRLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUNKLGNBQUEsR0FBQUcsQ0FBQSxNQUNyQ0MsT0FBTyxDQUFDLHdCQUF3QixDQUFDLENBQUU7QUFBQUosY0FBQSxHQUFBRyxDQUFBLE1BQ25DQyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBSztBQUVuQyxLQUFNLENBQUFDLGlCQUFpQixFQUFBTCxjQUFBLEdBQUFHLENBQUEsTUFBRyxHQUFJLENBQUFELFFBQVEsQ0FBQ0ksTUFBTSxDQUFDLENBQzVDQyxNQUFNLENBQUUsQ0FBRUMsSUFBSSxDQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRLENBQUVDLEdBQUcsQ0FBRSxRQUFRLENBQUVDLFFBQVEsQ0FBRSxDQUFDLElBQUksQ0FBRSxvQkFBb0IsQ0FBRSxDQUFDLENBQ3ZHQyxTQUFTLENBQUUsQ0FBRUwsSUFBSSxDQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRLENBQUVDLEdBQUcsQ0FBRSxTQUFTLENBQUVDLFFBQVEsQ0FBRSxDQUFDLElBQUksQ0FBRSx1QkFBdUIsQ0FBRSxDQUFDLENBQzlHRSxNQUFNLENBQUUsQ0FBRU4sSUFBSSxDQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRLENBQUVDLEdBQUcsQ0FBRSxNQUFNLENBQUVDLFFBQVEsQ0FBRSxJQUFLLENBQUMsQ0FDN0VHLGlCQUFpQixDQUFFLENBQUVQLElBQUksQ0FBRVEsTUFBTSxDQUFFSixRQUFRLENBQUUsQ0FBQyxJQUFJLENBQUUsK0JBQStCLENBQUMsQ0FBRUssR0FBRyxDQUFFLENBQUMsQ0FBQyxDQUFFLGtDQUFrQyxDQUFFLENBQUMsQ0FDcElDLFdBQVcsQ0FBRSxDQUFFVixJQUFJLENBQUVRLE1BQU0sQ0FBRUcsT0FBTyxDQUFFLENBQUUsQ0FBQyxDQUFHO0FBQzVDQyxVQUFVLENBQUUsQ0FBRVosSUFBSSxDQUFFUSxNQUFNLENBQUVHLE9BQU8sQ0FBRSxDQUFFLENBQUMsQ0FBSTtBQUM1Q0UsV0FBVyxDQUFDLENBQUNiLElBQUksQ0FBQ1EsTUFBTSxDQUFFRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQ3BDRyxZQUFZLENBQUMsQ0FBQ2QsSUFBSSxDQUFDUSxNQUFNLENBQUVHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FDckNJLE1BQU0sQ0FBRSxDQUFFZixJQUFJLENBQUVnQixNQUFNLENBQUVDLElBQUksQ0FBRSxDQUFDLFNBQVMsQ0FBRSxVQUFVLENBQUUsVUFBVSxDQUFDLENBQUVOLE9BQU8sQ0FBRSxTQUFVLENBQUMsQ0FDdkZPLGVBQWUsQ0FBRSxDQUFFbEIsSUFBSSxDQUFFbUIsSUFBSSxDQUFFUixPQUFPLENBQUVRLElBQUksQ0FBQ0MsR0FBSSxDQUNuRCxDQUFDLENBQUMsRUFFRjtBQUFBNUIsY0FBQSxHQUFBRyxDQUFBLE1BQ0FFLGlCQUFpQixDQUFDd0IsR0FBRyxDQUFDLE1BQU0sQ0FBRSxTQUFVQyxJQUFJLENBQUUsQ0FBQTlCLGNBQUEsR0FBQStCLENBQUEsTUFBQS9CLGNBQUEsR0FBQUcsQ0FBQSxNQUM1QyxHQUFJLElBQUksQ0FBQzZCLEtBQUssQ0FBRSxDQUFBaEMsY0FBQSxHQUFBaUMsQ0FBQSxTQUFBakMsY0FBQSxHQUFBRyxDQUFBLE1BQ2QsSUFBSSxDQUFDaUIsVUFBVSxDQUFHLElBQUksQ0FBQ0wsaUJBQWlCLENBQUU7QUFDNUMsQ0FBQyxLQUFBZixjQUFBLEdBQUFpQyxDQUFBLFVBQUFqQyxjQUFBLEdBQUFHLENBQUEsTUFDRDJCLElBQUksQ0FBQyxDQUFDLENBQ1IsQ0FBQyxDQUFDLENBQUM5QixjQUFBLEdBQUFHLENBQUEsTUFFSCtCLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHakMsUUFBUSxDQUFDa0MsS0FBSyxDQUFDLGFBQWEsQ0FBRS9CLGlCQUFpQixDQUFFLGFBQWEsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==