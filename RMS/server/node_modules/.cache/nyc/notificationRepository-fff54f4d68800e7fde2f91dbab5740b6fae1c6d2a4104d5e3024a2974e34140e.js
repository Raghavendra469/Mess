function cov_wpsk7hztl(){var path="C:\\capstone on friday\\Mess\\RMS\\server\\repositories\\notificationRepository.js";var hash="0c0af78ee1f5a7b3b0eecfcfa5c2944673c2fe3c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\capstone on friday\\Mess\\RMS\\server\\repositories\\notificationRepository.js",statementMap:{"0":{start:{line:2,column:21},end:{line:2,column:59}},"1":{start:{line:7,column:25},end:{line:7,column:59}},"2":{start:{line:8,column:4},end:{line:8,column:37}},"3":{start:{line:13,column:4},end:{line:13,column:47}},"4":{start:{line:18,column:4},end:{line:31,column:3}},"5":{start:{line:19,column:25},end:{line:23,column:5}},"6":{start:{line:24,column:4},end:{line:24,column:34}},"7":{start:{line:24,column:22},end:{line:24,column:34}},"8":{start:{line:25,column:4},end:{line:25,column:62}},"9":{start:{line:26,column:4},end:{line:26,column:24}},"10":{start:{line:30,column:4},end:{line:30,column:40}},"11":{start:{line:34,column:0},end:{line:34,column:40}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:33},end:{line:9,column:3}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:29},end:{line:14,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:32,column:1}},line:17}},branchMap:{"0":{loc:{start:{line:24,column:4},end:{line:24,column:34}},type:"if",locations:[{start:{line:24,column:4},end:{line:24,column:34}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0c0af78ee1f5a7b3b0eecfcfa5c2944673c2fe3c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_wpsk7hztl=function(){return actualCoverage;};}return actualCoverage;}cov_wpsk7hztl();// notificationRepository.js
const Notification=(cov_wpsk7hztl().s[0]++,require('../models/notificationModel'));// The Mongoose model
class NotificationRepository{// Create a new notification
async create(notificationData){cov_wpsk7hztl().f[0]++;const notification=(cov_wpsk7hztl().s[1]++,new Notification(notificationData));cov_wpsk7hztl().s[2]++;return await notification.save();// Save to DB
}// Get notifications by user ID
async findByUserId(userId){cov_wpsk7hztl().f[1]++;cov_wpsk7hztl().s[3]++;return await Notification.find({userId});// Fetch from DB
}// Mark notification as read and delete it
async markAsReadAndDelete(notificationId){cov_wpsk7hztl().f[2]++;cov_wpsk7hztl().s[4]++;try{const notification=(cov_wpsk7hztl().s[5]++,await Notification.findByIdAndUpdate(notificationId,{isRead:true},{new:true}));cov_wpsk7hztl().s[6]++;if(!notification){cov_wpsk7hztl().b[0][0]++;cov_wpsk7hztl().s[7]++;return null;}else{cov_wpsk7hztl().b[0][1]++;}cov_wpsk7hztl().s[8]++;await Notification.findOneAndDelete({_id:notificationId});// Delete after marking as read
cov_wpsk7hztl().s[9]++;return notification;// Return the updated notification
}catch(error){cov_wpsk7hztl().s[10]++;throw new Error(`${error.message}`);}}}cov_wpsk7hztl().s[11]++;module.exports=NotificationRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfd3BzazdoenRsIiwiYWN0dWFsQ292ZXJhZ2UiLCJOb3RpZmljYXRpb24iLCJzIiwicmVxdWlyZSIsIk5vdGlmaWNhdGlvblJlcG9zaXRvcnkiLCJjcmVhdGUiLCJub3RpZmljYXRpb25EYXRhIiwiZiIsIm5vdGlmaWNhdGlvbiIsInNhdmUiLCJmaW5kQnlVc2VySWQiLCJ1c2VySWQiLCJmaW5kIiwibWFya0FzUmVhZEFuZERlbGV0ZSIsIm5vdGlmaWNhdGlvbklkIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJpc1JlYWQiLCJuZXciLCJiIiwiZmluZE9uZUFuZERlbGV0ZSIsIl9pZCIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvblJlcG9zaXRvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbm90aWZpY2F0aW9uUmVwb3NpdG9yeS5qc1xyXG5jb25zdCBOb3RpZmljYXRpb24gPSByZXF1aXJlKCcuLi9tb2RlbHMvbm90aWZpY2F0aW9uTW9kZWwnKTsgLy8gVGhlIE1vbmdvb3NlIG1vZGVsXHJcblxyXG5jbGFzcyBOb3RpZmljYXRpb25SZXBvc2l0b3J5IHtcclxuICAvLyBDcmVhdGUgYSBuZXcgbm90aWZpY2F0aW9uXHJcbiAgYXN5bmMgY3JlYXRlKG5vdGlmaWNhdGlvbkRhdGEpIHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24obm90aWZpY2F0aW9uRGF0YSk7XHJcbiAgICByZXR1cm4gYXdhaXQgbm90aWZpY2F0aW9uLnNhdmUoKTsgLy8gU2F2ZSB0byBEQlxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IG5vdGlmaWNhdGlvbnMgYnkgdXNlciBJRFxyXG4gIGFzeW5jIGZpbmRCeVVzZXJJZCh1c2VySWQpIHtcclxuICAgIHJldHVybiBhd2FpdCBOb3RpZmljYXRpb24uZmluZCh7IHVzZXJJZCB9KTsgLy8gRmV0Y2ggZnJvbSBEQlxyXG4gIH1cclxuXHJcbiAgLy8gTWFyayBub3RpZmljYXRpb24gYXMgcmVhZCBhbmQgZGVsZXRlIGl0XHJcbiAgYXN5bmMgbWFya0FzUmVhZEFuZERlbGV0ZShub3RpZmljYXRpb25JZCkge1xyXG4gICAgdHJ5e1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uID0gYXdhaXQgTm90aWZpY2F0aW9uLmZpbmRCeUlkQW5kVXBkYXRlKFxyXG4gICAgICBub3RpZmljYXRpb25JZCxcclxuICAgICAgeyBpc1JlYWQ6IHRydWUgfSxcclxuICAgICAgeyBuZXc6IHRydWUgfVxyXG4gICAgKTtcclxuICAgIGlmKCFub3RpZmljYXRpb24pIHJldHVybiBudWxsO1xyXG4gICAgYXdhaXQgTm90aWZpY2F0aW9uLmZpbmRPbmVBbmREZWxldGUoe19pZDpub3RpZmljYXRpb25JZH0pOyAvLyBEZWxldGUgYWZ0ZXIgbWFya2luZyBhcyByZWFkXHJcbiAgICByZXR1cm4gbm90aWZpY2F0aW9uOyAvLyBSZXR1cm4gdGhlIHVwZGF0ZWQgbm90aWZpY2F0aW9uXHJcbiAgfVxyXG5cclxuICBjYXRjaChlcnJvcil7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IE5vdGlmaWNhdGlvblJlcG9zaXRvcnk7XHJcbiJdLCJtYXBwaW5ncyI6ImloRUFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWjtBQUNBLEtBQU0sQ0FBQUUsWUFBWSxFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLDZCQUE2QixDQUFDLEVBQUU7QUFFN0QsS0FBTSxDQUFBQyxzQkFBdUIsQ0FDM0I7QUFDQSxLQUFNLENBQUFDLE1BQU1BLENBQUNDLGdCQUFnQixDQUFFLENBQUFQLGFBQUEsR0FBQVEsQ0FBQSxNQUM3QixLQUFNLENBQUFDLFlBQVksRUFBQVQsYUFBQSxHQUFBRyxDQUFBLE1BQUcsR0FBSSxDQUFBRCxZQUFZLENBQUNLLGdCQUFnQixDQUFDLEVBQUNQLGFBQUEsR0FBQUcsQ0FBQSxNQUN4RCxNQUFPLE1BQU0sQ0FBQU0sWUFBWSxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFFO0FBQ3BDLENBRUE7QUFDQSxLQUFNLENBQUFDLFlBQVlBLENBQUNDLE1BQU0sQ0FBRSxDQUFBWixhQUFBLEdBQUFRLENBQUEsTUFBQVIsYUFBQSxHQUFBRyxDQUFBLE1BQ3pCLE1BQU8sTUFBTSxDQUFBRCxZQUFZLENBQUNXLElBQUksQ0FBQyxDQUFFRCxNQUFPLENBQUMsQ0FBQyxDQUFFO0FBQzlDLENBRUE7QUFDQSxLQUFNLENBQUFFLG1CQUFtQkEsQ0FBQ0MsY0FBYyxDQUFFLENBQUFmLGFBQUEsR0FBQVEsQ0FBQSxNQUFBUixhQUFBLEdBQUFHLENBQUEsTUFDeEMsR0FBRyxDQUNILEtBQU0sQ0FBQU0sWUFBWSxFQUFBVCxhQUFBLEdBQUFHLENBQUEsTUFBRyxLQUFNLENBQUFELFlBQVksQ0FBQ2MsaUJBQWlCLENBQ3ZERCxjQUFjLENBQ2QsQ0FBRUUsTUFBTSxDQUFFLElBQUssQ0FBQyxDQUNoQixDQUFFQyxHQUFHLENBQUUsSUFBSyxDQUNkLENBQUMsRUFBQ2xCLGFBQUEsR0FBQUcsQ0FBQSxNQUNGLEdBQUcsQ0FBQ00sWUFBWSxDQUFFLENBQUFULGFBQUEsR0FBQW1CLENBQUEsU0FBQW5CLGFBQUEsR0FBQUcsQ0FBQSxZQUFPLEtBQUksRUFBQyxLQUFBSCxhQUFBLEdBQUFtQixDQUFBLFVBQUFuQixhQUFBLEdBQUFHLENBQUEsTUFDOUIsS0FBTSxDQUFBRCxZQUFZLENBQUNrQixnQkFBZ0IsQ0FBQyxDQUFDQyxHQUFHLENBQUNOLGNBQWMsQ0FBQyxDQUFDLENBQUU7QUFBQWYsYUFBQSxHQUFBRyxDQUFBLE1BQzNELE1BQU8sQ0FBQU0sWUFBWSxDQUFFO0FBQ3ZCLENBRUEsTUFBTWEsS0FBSyxDQUFDLENBQUF0QixhQUFBLEdBQUFHLENBQUEsT0FDVixLQUFNLElBQUksQ0FBQW9CLEtBQUssQ0FBQyxHQUFHRCxLQUFLLENBQUNFLE9BQU8sRUFBRSxDQUFDLENBQ3JDLENBQ0YsQ0FDQSxDQUFDeEIsYUFBQSxHQUFBRyxDQUFBLE9BQ0RzQixNQUFNLENBQUNDLE9BQU8sQ0FBR3JCLHNCQUFzQiIsImlnbm9yZUxpc3QiOltdfQ==