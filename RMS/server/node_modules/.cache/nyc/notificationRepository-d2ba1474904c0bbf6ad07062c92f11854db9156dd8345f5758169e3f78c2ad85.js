function cov_wpsk7hztl(){var path="C:\\capstone on friday\\Mess\\RMS\\server\\repositories\\notificationRepository.js";var hash="e28c686421cccb1a0fdcc8b63aa7c9f89ff35efa";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\capstone on friday\\Mess\\RMS\\server\\repositories\\notificationRepository.js",statementMap:{"0":{start:{line:2,column:21},end:{line:2,column:59}},"1":{start:{line:7,column:25},end:{line:7,column:59}},"2":{start:{line:8,column:4},end:{line:8,column:37}},"3":{start:{line:13,column:4},end:{line:13,column:47}},"4":{start:{line:18,column:25},end:{line:22,column:5}},"5":{start:{line:23,column:4},end:{line:23,column:56}},"6":{start:{line:24,column:4},end:{line:24,column:24}},"7":{start:{line:28,column:0},end:{line:28,column:40}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:33},end:{line:9,column:3}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:29},end:{line:14,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:25,column:3}},line:17}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},f:{"0":0,"1":0,"2":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e28c686421cccb1a0fdcc8b63aa7c9f89ff35efa"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_wpsk7hztl=function(){return actualCoverage;};}return actualCoverage;}cov_wpsk7hztl();// notificationRepository.js
const Notification=(cov_wpsk7hztl().s[0]++,require('../models/notificationModel'));// The Mongoose model
class NotificationRepository{// Create a new notification
async create(notificationData){cov_wpsk7hztl().f[0]++;const notification=(cov_wpsk7hztl().s[1]++,new Notification(notificationData));cov_wpsk7hztl().s[2]++;return await notification.save();// Save to DB
}// Get notifications by user ID
async findByUserId(userId){cov_wpsk7hztl().f[1]++;cov_wpsk7hztl().s[3]++;return await Notification.find({userId});// Fetch from DB
}// Mark notification as read and delete it
async markAsReadAndDelete(notificationId){cov_wpsk7hztl().f[2]++;const notification=(cov_wpsk7hztl().s[4]++,await Notification.findByIdAndUpdate(notificationId,{isRead:true},{new:true}));cov_wpsk7hztl().s[5]++;await Notification.findOneAndDelete(notificationId);// Delete after marking as read
cov_wpsk7hztl().s[6]++;return notification;// Return the updated notification
}}cov_wpsk7hztl().s[7]++;module.exports=NotificationRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfd3BzazdoenRsIiwiYWN0dWFsQ292ZXJhZ2UiLCJOb3RpZmljYXRpb24iLCJzIiwicmVxdWlyZSIsIk5vdGlmaWNhdGlvblJlcG9zaXRvcnkiLCJjcmVhdGUiLCJub3RpZmljYXRpb25EYXRhIiwiZiIsIm5vdGlmaWNhdGlvbiIsInNhdmUiLCJmaW5kQnlVc2VySWQiLCJ1c2VySWQiLCJmaW5kIiwibWFya0FzUmVhZEFuZERlbGV0ZSIsIm5vdGlmaWNhdGlvbklkIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJpc1JlYWQiLCJuZXciLCJmaW5kT25lQW5kRGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvblJlcG9zaXRvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbm90aWZpY2F0aW9uUmVwb3NpdG9yeS5qc1xyXG5jb25zdCBOb3RpZmljYXRpb24gPSByZXF1aXJlKCcuLi9tb2RlbHMvbm90aWZpY2F0aW9uTW9kZWwnKTsgLy8gVGhlIE1vbmdvb3NlIG1vZGVsXHJcblxyXG5jbGFzcyBOb3RpZmljYXRpb25SZXBvc2l0b3J5IHtcclxuICAvLyBDcmVhdGUgYSBuZXcgbm90aWZpY2F0aW9uXHJcbiAgYXN5bmMgY3JlYXRlKG5vdGlmaWNhdGlvbkRhdGEpIHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24obm90aWZpY2F0aW9uRGF0YSk7XHJcbiAgICByZXR1cm4gYXdhaXQgbm90aWZpY2F0aW9uLnNhdmUoKTsgLy8gU2F2ZSB0byBEQlxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IG5vdGlmaWNhdGlvbnMgYnkgdXNlciBJRFxyXG4gIGFzeW5jIGZpbmRCeVVzZXJJZCh1c2VySWQpIHtcclxuICAgIHJldHVybiBhd2FpdCBOb3RpZmljYXRpb24uZmluZCh7IHVzZXJJZCB9KTsgLy8gRmV0Y2ggZnJvbSBEQlxyXG4gIH1cclxuXHJcbiAgLy8gTWFyayBub3RpZmljYXRpb24gYXMgcmVhZCBhbmQgZGVsZXRlIGl0XHJcbiAgYXN5bmMgbWFya0FzUmVhZEFuZERlbGV0ZShub3RpZmljYXRpb25JZCkge1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uID0gYXdhaXQgTm90aWZpY2F0aW9uLmZpbmRCeUlkQW5kVXBkYXRlKFxyXG4gICAgICBub3RpZmljYXRpb25JZCxcclxuICAgICAgeyBpc1JlYWQ6IHRydWUgfSxcclxuICAgICAgeyBuZXc6IHRydWUgfVxyXG4gICAgKTtcclxuICAgIGF3YWl0IE5vdGlmaWNhdGlvbi5maW5kT25lQW5kRGVsZXRlKG5vdGlmaWNhdGlvbklkKTsgLy8gRGVsZXRlIGFmdGVyIG1hcmtpbmcgYXMgcmVhZFxyXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbjsgLy8gUmV0dXJuIHRoZSB1cGRhdGVkIG5vdGlmaWNhdGlvblxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOb3RpZmljYXRpb25SZXBvc2l0b3J5O1xyXG4iXSwibWFwcGluZ3MiOiJtakRBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlo7QUFDQSxLQUFNLENBQUFFLFlBQVksRUFBQUYsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxFQUFFO0FBRTdELEtBQU0sQ0FBQUMsc0JBQXVCLENBQzNCO0FBQ0EsS0FBTSxDQUFBQyxNQUFNQSxDQUFDQyxnQkFBZ0IsQ0FBRSxDQUFBUCxhQUFBLEdBQUFRLENBQUEsTUFDN0IsS0FBTSxDQUFBQyxZQUFZLEVBQUFULGFBQUEsR0FBQUcsQ0FBQSxNQUFHLEdBQUksQ0FBQUQsWUFBWSxDQUFDSyxnQkFBZ0IsQ0FBQyxFQUFDUCxhQUFBLEdBQUFHLENBQUEsTUFDeEQsTUFBTyxNQUFNLENBQUFNLFlBQVksQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBRTtBQUNwQyxDQUVBO0FBQ0EsS0FBTSxDQUFBQyxZQUFZQSxDQUFDQyxNQUFNLENBQUUsQ0FBQVosYUFBQSxHQUFBUSxDQUFBLE1BQUFSLGFBQUEsR0FBQUcsQ0FBQSxNQUN6QixNQUFPLE1BQU0sQ0FBQUQsWUFBWSxDQUFDVyxJQUFJLENBQUMsQ0FBRUQsTUFBTyxDQUFDLENBQUMsQ0FBRTtBQUM5QyxDQUVBO0FBQ0EsS0FBTSxDQUFBRSxtQkFBbUJBLENBQUNDLGNBQWMsQ0FBRSxDQUFBZixhQUFBLEdBQUFRLENBQUEsTUFDeEMsS0FBTSxDQUFBQyxZQUFZLEVBQUFULGFBQUEsR0FBQUcsQ0FBQSxNQUFHLEtBQU0sQ0FBQUQsWUFBWSxDQUFDYyxpQkFBaUIsQ0FDdkRELGNBQWMsQ0FDZCxDQUFFRSxNQUFNLENBQUUsSUFBSyxDQUFDLENBQ2hCLENBQUVDLEdBQUcsQ0FBRSxJQUFLLENBQ2QsQ0FBQyxFQUFDbEIsYUFBQSxHQUFBRyxDQUFBLE1BQ0YsS0FBTSxDQUFBRCxZQUFZLENBQUNpQixnQkFBZ0IsQ0FBQ0osY0FBYyxDQUFDLENBQUU7QUFBQWYsYUFBQSxHQUFBRyxDQUFBLE1BQ3JELE1BQU8sQ0FBQU0sWUFBWSxDQUFFO0FBQ3ZCLENBQ0YsQ0FBQ1QsYUFBQSxHQUFBRyxDQUFBLE1BRURpQixNQUFNLENBQUNDLE9BQU8sQ0FBR2hCLHNCQUFzQiIsImlnbm9yZUxpc3QiOltdfQ==