function cov_h9tl4jrvv(){var path="C:\\capstone on friday\\Mess\\RMS\\server\\models\\transaction.js";var hash="5cadf7451f3688223763234a977819cf9db07914";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\capstone on friday\\Mess\\RMS\\server\\models\\transaction.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:0},end:{line:2,column:34}},"2":{start:{line:3,column:0},end:{line:3,column:31}},"3":{start:{line:5,column:26},end:{line:16,column:2}},"4":{start:{line:19,column:0},end:{line:24,column:3}},"5":{start:{line:20,column:2},end:{line:22,column:3}},"6":{start:{line:21,column:4},end:{line:21,column:45}},"7":{start:{line:23,column:2},end:{line:23,column:9}},"8":{start:{line:26,column:0},end:{line:26,column:81}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:46},end:{line:24,column:1}},line:19}},branchMap:{"0":{loc:{start:{line:20,column:2},end:{line:22,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:22,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:20}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5cadf7451f3688223763234a977819cf9db07914"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_h9tl4jrvv=function(){return actualCoverage;};}return actualCoverage;}cov_h9tl4jrvv();const mongoose=(cov_h9tl4jrvv().s[0]++,require('mongoose'));cov_h9tl4jrvv().s[1]++;require('../models/royaltyModel');// Import Royalty model
cov_h9tl4jrvv().s[2]++;require('../models/userModel');// Import User model
const TransactionSchema=(cov_h9tl4jrvv().s[3]++,new mongoose.Schema({userId:{type:mongoose.Schema.Types.ObjectId,ref:'Artist',required:[true,"userId is required"]},royaltyId:{type:mongoose.Schema.Types.ObjectId,ref:'Royalty',required:[true,"royaltyId is required"]},songId:{type:mongoose.Schema.Types.ObjectId,ref:'Song',required:true},transactionAmount:{type:Number,required:[true,"transactionAmount is required"],min:[1,"Amount must be greater than zero"]},royaltyPaid:{type:Number,default:0},// Amount paid to the artist
royaltyDue:{type:Number,default:0},// Amount pending to be paid
artistShare:{type:Number,default:0},managerShare:{type:Number,default:0},status:{type:String,enum:['Pending','Approved','Rejected'],default:'Pending'},transactionDate:{type:Date,default:Date.now}}));// Pre-save logic to initialize royaltyDue as the transactionAmount
cov_h9tl4jrvv().s[4]++;TransactionSchema.pre('save',function(next){cov_h9tl4jrvv().f[0]++;cov_h9tl4jrvv().s[5]++;if(this.isNew){cov_h9tl4jrvv().b[0][0]++;cov_h9tl4jrvv().s[6]++;this.royaltyDue=this.transactionAmount;// Set initial due amount to the transaction amount
}else{cov_h9tl4jrvv().b[0][1]++;}cov_h9tl4jrvv().s[7]++;next();});cov_h9tl4jrvv().s[8]++;module.exports=mongoose.model('Transaction',TransactionSchema,'Transaction');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfaDl0bDRqcnZ2IiwiYWN0dWFsQ292ZXJhZ2UiLCJtb25nb29zZSIsInMiLCJyZXF1aXJlIiwiVHJhbnNhY3Rpb25TY2hlbWEiLCJTY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwicm95YWx0eUlkIiwic29uZ0lkIiwidHJhbnNhY3Rpb25BbW91bnQiLCJOdW1iZXIiLCJtaW4iLCJyb3lhbHR5UGFpZCIsImRlZmF1bHQiLCJyb3lhbHR5RHVlIiwiYXJ0aXN0U2hhcmUiLCJtYW5hZ2VyU2hhcmUiLCJzdGF0dXMiLCJTdHJpbmciLCJlbnVtIiwidHJhbnNhY3Rpb25EYXRlIiwiRGF0ZSIsIm5vdyIsInByZSIsIm5leHQiLCJmIiwiaXNOZXciLCJiIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZXMiOlsidHJhbnNhY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5yZXF1aXJlKCcuLi9tb2RlbHMvcm95YWx0eU1vZGVsJyk7IC8vIEltcG9ydCBSb3lhbHR5IG1vZGVsXHJcbnJlcXVpcmUoJy4uL21vZGVscy91c2VyTW9kZWwnKTsgICAgLy8gSW1wb3J0IFVzZXIgbW9kZWxcclxuXHJcbmNvbnN0IFRyYW5zYWN0aW9uU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgdXNlcklkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnQXJ0aXN0JywgcmVxdWlyZWQ6IFt0cnVlLCBcInVzZXJJZCBpcyByZXF1aXJlZFwiXSB9LFxyXG4gIHJveWFsdHlJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1JveWFsdHknLCByZXF1aXJlZDogW3RydWUsIFwicm95YWx0eUlkIGlzIHJlcXVpcmVkXCJdIH0sXHJcbiAgc29uZ0lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnU29uZycsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgdHJhbnNhY3Rpb25BbW91bnQ6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogW3RydWUsIFwidHJhbnNhY3Rpb25BbW91bnQgaXMgcmVxdWlyZWRcIl0sIG1pbjogWzEsIFwiQW1vdW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm9cIl0gfSxcclxuICByb3lhbHR5UGFpZDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSwgIC8vIEFtb3VudCBwYWlkIHRvIHRoZSBhcnRpc3RcclxuICByb3lhbHR5RHVlOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LCAgIC8vIEFtb3VudCBwZW5kaW5nIHRvIGJlIHBhaWRcclxuICBhcnRpc3RTaGFyZTp7dHlwZTpOdW1iZXIsIGRlZmF1bHQ6MH0sXHJcbiAgbWFuYWdlclNoYXJlOnt0eXBlOk51bWJlciwgZGVmYXVsdDowfSxcclxuICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbJ1BlbmRpbmcnLCAnQXBwcm92ZWQnLCAnUmVqZWN0ZWQnXSwgZGVmYXVsdDogJ1BlbmRpbmcnIH0sXHJcbiAgdHJhbnNhY3Rpb25EYXRlOiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cclxufSk7XHJcblxyXG4vLyBQcmUtc2F2ZSBsb2dpYyB0byBpbml0aWFsaXplIHJveWFsdHlEdWUgYXMgdGhlIHRyYW5zYWN0aW9uQW1vdW50XHJcblRyYW5zYWN0aW9uU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKHRoaXMuaXNOZXcpIHtcclxuICAgIHRoaXMucm95YWx0eUR1ZSA9IHRoaXMudHJhbnNhY3Rpb25BbW91bnQ7IC8vIFNldCBpbml0aWFsIGR1ZSBhbW91bnQgdG8gdGhlIHRyYW5zYWN0aW9uIGFtb3VudFxyXG4gIH1cclxuICBuZXh0KCk7XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnVHJhbnNhY3Rpb24nLCBUcmFuc2FjdGlvblNjaGVtYSwgJ1RyYW5zYWN0aW9uJyk7XHJcbiJdLCJtYXBwaW5ncyI6InNnREFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQUFFLFFBQVEsRUFBQUYsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFBQ0osYUFBQSxHQUFBRyxDQUFBLE1BQ3JDQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBRTtBQUFBSixhQUFBLEdBQUFHLENBQUEsTUFDbkNDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFLO0FBRW5DLEtBQU0sQ0FBQUMsaUJBQWlCLEVBQUFMLGFBQUEsR0FBQUcsQ0FBQSxNQUFHLEdBQUksQ0FBQUQsUUFBUSxDQUFDSSxNQUFNLENBQUMsQ0FDNUNDLE1BQU0sQ0FBRSxDQUFFQyxJQUFJLENBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVEsQ0FBRUMsR0FBRyxDQUFFLFFBQVEsQ0FBRUMsUUFBUSxDQUFFLENBQUMsSUFBSSxDQUFFLG9CQUFvQixDQUFFLENBQUMsQ0FDdkdDLFNBQVMsQ0FBRSxDQUFFTCxJQUFJLENBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVEsQ0FBRUMsR0FBRyxDQUFFLFNBQVMsQ0FBRUMsUUFBUSxDQUFFLENBQUMsSUFBSSxDQUFFLHVCQUF1QixDQUFFLENBQUMsQ0FDOUdFLE1BQU0sQ0FBRSxDQUFFTixJQUFJLENBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVEsQ0FBRUMsR0FBRyxDQUFFLE1BQU0sQ0FBRUMsUUFBUSxDQUFFLElBQUssQ0FBQyxDQUM3RUcsaUJBQWlCLENBQUUsQ0FBRVAsSUFBSSxDQUFFUSxNQUFNLENBQUVKLFFBQVEsQ0FBRSxDQUFDLElBQUksQ0FBRSwrQkFBK0IsQ0FBQyxDQUFFSyxHQUFHLENBQUUsQ0FBQyxDQUFDLENBQUUsa0NBQWtDLENBQUUsQ0FBQyxDQUNwSUMsV0FBVyxDQUFFLENBQUVWLElBQUksQ0FBRVEsTUFBTSxDQUFFRyxPQUFPLENBQUUsQ0FBRSxDQUFDLENBQUc7QUFDNUNDLFVBQVUsQ0FBRSxDQUFFWixJQUFJLENBQUVRLE1BQU0sQ0FBRUcsT0FBTyxDQUFFLENBQUUsQ0FBQyxDQUFJO0FBQzVDRSxXQUFXLENBQUMsQ0FBQ2IsSUFBSSxDQUFDUSxNQUFNLENBQUVHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FDcENHLFlBQVksQ0FBQyxDQUFDZCxJQUFJLENBQUNRLE1BQU0sQ0FBRUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUNyQ0ksTUFBTSxDQUFFLENBQUVmLElBQUksQ0FBRWdCLE1BQU0sQ0FBRUMsSUFBSSxDQUFFLENBQUMsU0FBUyxDQUFFLFVBQVUsQ0FBRSxVQUFVLENBQUMsQ0FBRU4sT0FBTyxDQUFFLFNBQVUsQ0FBQyxDQUN2Rk8sZUFBZSxDQUFFLENBQUVsQixJQUFJLENBQUVtQixJQUFJLENBQUVSLE9BQU8sQ0FBRVEsSUFBSSxDQUFDQyxHQUFJLENBQ25ELENBQUMsQ0FBQyxFQUVGO0FBQUE1QixhQUFBLEdBQUFHLENBQUEsTUFDQUUsaUJBQWlCLENBQUN3QixHQUFHLENBQUMsTUFBTSxDQUFFLFNBQVVDLElBQUksQ0FBRSxDQUFBOUIsYUFBQSxHQUFBK0IsQ0FBQSxNQUFBL0IsYUFBQSxHQUFBRyxDQUFBLE1BQzVDLEdBQUksSUFBSSxDQUFDNkIsS0FBSyxDQUFFLENBQUFoQyxhQUFBLEdBQUFpQyxDQUFBLFNBQUFqQyxhQUFBLEdBQUFHLENBQUEsTUFDZCxJQUFJLENBQUNpQixVQUFVLENBQUcsSUFBSSxDQUFDTCxpQkFBaUIsQ0FBRTtBQUM1QyxDQUFDLEtBQUFmLGFBQUEsR0FBQWlDLENBQUEsVUFBQWpDLGFBQUEsR0FBQUcsQ0FBQSxNQUNEMkIsSUFBSSxDQUFDLENBQUMsQ0FDUixDQUFDLENBQUMsQ0FBQzlCLGFBQUEsR0FBQUcsQ0FBQSxNQUVIK0IsTUFBTSxDQUFDQyxPQUFPLENBQUdqQyxRQUFRLENBQUNrQyxLQUFLLENBQUMsYUFBYSxDQUFFL0IsaUJBQWlCLENBQUUsYUFBYSxDQUFDIiwiaWdub3JlTGlzdCI6W119