function cov_1bcy373uvx(){var path="C:\\capstone on friday\\Mess\\RMS\\server\\repositories\\royaltyRepository.js";var hash="a2bdcbbe9b33d4443570e157125f5d57dbff2d89";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\capstone on friday\\Mess\\RMS\\server\\repositories\\royaltyRepository.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:49}},"1":{start:{line:2,column:11},end:{line:2,column:41}},"2":{start:{line:3,column:15},end:{line:3,column:47}},"3":{start:{line:8,column:24},end:{line:8,column:64}},"4":{start:{line:10,column:8},end:{line:10,column:36}},"5":{start:{line:15,column:8},end:{line:15,column:52}},"6":{start:{line:20,column:8},end:{line:20,column:49}},"7":{start:{line:21,column:8},end:{line:21,column:97}},"8":{start:{line:25,column:8},end:{line:25,column:54}},"9":{start:{line:29,column:8},end:{line:32,column:10}},"10":{start:{line:37,column:0},end:{line:37,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:44},end:{line:11,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:30},end:{line:16,column:5}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:4},end:{line:19,column:5}},loc:{start:{line:19,column:35},end:{line:22,column:5}},line:19},"3":{name:"(anonymous_3)",decl:{start:{line:24,column:4},end:{line:24,column:5}},loc:{start:{line:24,column:40},end:{line:26,column:5}},line:24},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:4},end:{line:28,column:5}},loc:{start:{line:28,column:102},end:{line:33,column:5}},line:28}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a2bdcbbe9b33d4443570e157125f5d57dbff2d89"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1bcy373uvx=function(){return actualCoverage;};}return actualCoverage;}cov_1bcy373uvx();const Royalty=(cov_1bcy373uvx().s[0]++,require('../models/royaltyModel'));const Song=(cov_1bcy373uvx().s[1]++,require('../models/songModel'));const Artist=(cov_1bcy373uvx().s[2]++,require('../models/artistModel'));class RoyaltyRepository{// Create a new royalty
async create(royaltyId,artistId,songId){cov_1bcy373uvx().f[0]++;const royalty=(cov_1bcy373uvx().s[3]++,new Royalty({royaltyId,artistId,songId}));cov_1bcy373uvx().s[4]++;return await royalty.save();}// Get royalty by ID
async findById(royaltyId){cov_1bcy373uvx().f[1]++;cov_1bcy373uvx().s[5]++;return await Royalty.findOne({royaltyId});}// Get royalties by artist ID
async findByArtistId(artistId){cov_1bcy373uvx().f[2]++;cov_1bcy373uvx().s[6]++;console.log(artistId,"inside repository");cov_1bcy373uvx().s[7]++;return await Royalty.find({artistId:artistId}).populate('artistId').populate('songId');}async findSongsByArtistId(artistId){cov_1bcy373uvx().f[3]++;cov_1bcy373uvx().s[8]++;return await Song.find({artistId:artistId});}async updateArtistRoyalty(artistId,fullRoyalty,totalRoyaltyPaid,totalRoyaltyDue,totalStreams){cov_1bcy373uvx().f[4]++;cov_1bcy373uvx().s[9]++;return await Artist.findOneAndUpdate({_id:artistId},{fullRoyalty,totalRoyaltyPaid,totalRoyaltyDue,totalStreams});}}cov_1bcy373uvx().s[10]++;module.exports=RoyaltyRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWJjeTM3M3V2eCIsImFjdHVhbENvdmVyYWdlIiwiUm95YWx0eSIsInMiLCJyZXF1aXJlIiwiU29uZyIsIkFydGlzdCIsIlJveWFsdHlSZXBvc2l0b3J5IiwiY3JlYXRlIiwicm95YWx0eUlkIiwiYXJ0aXN0SWQiLCJzb25nSWQiLCJmIiwicm95YWx0eSIsInNhdmUiLCJmaW5kQnlJZCIsImZpbmRPbmUiLCJmaW5kQnlBcnRpc3RJZCIsImNvbnNvbGUiLCJsb2ciLCJmaW5kIiwicG9wdWxhdGUiLCJmaW5kU29uZ3NCeUFydGlzdElkIiwidXBkYXRlQXJ0aXN0Um95YWx0eSIsImZ1bGxSb3lhbHR5IiwidG90YWxSb3lhbHR5UGFpZCIsInRvdGFsUm95YWx0eUR1ZSIsInRvdGFsU3RyZWFtcyIsImZpbmRPbmVBbmRVcGRhdGUiLCJfaWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicm95YWx0eVJlcG9zaXRvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUm95YWx0eSA9IHJlcXVpcmUoJy4uL21vZGVscy9yb3lhbHR5TW9kZWwnKTtcclxuY29uc3QgU29uZz1yZXF1aXJlKCcuLi9tb2RlbHMvc29uZ01vZGVsJyk7XHJcbmNvbnN0IEFydGlzdCA9IHJlcXVpcmUoJy4uL21vZGVscy9hcnRpc3RNb2RlbCcpO1xyXG5cclxuY2xhc3MgUm95YWx0eVJlcG9zaXRvcnkge1xyXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHJveWFsdHlcclxuICAgIGFzeW5jIGNyZWF0ZShyb3lhbHR5SWQsYXJ0aXN0SWQsc29uZ0lkKSB7XHJcbiAgICAgICAgY29uc3Qgcm95YWx0eSA9IG5ldyBSb3lhbHR5KHtyb3lhbHR5SWQsYXJ0aXN0SWQsc29uZ0lkfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCByb3lhbHR5LnNhdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgcm95YWx0eSBieSBJRFxyXG4gICAgYXN5bmMgZmluZEJ5SWQocm95YWx0eUlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFJveWFsdHkuZmluZE9uZSh7IHJveWFsdHlJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgcm95YWx0aWVzIGJ5IGFydGlzdCBJRFxyXG4gICAgYXN5bmMgZmluZEJ5QXJ0aXN0SWQoYXJ0aXN0SWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhhcnRpc3RJZCxcImluc2lkZSByZXBvc2l0b3J5XCIpXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFJveWFsdHkuZmluZCh7IGFydGlzdElkOmFydGlzdElkIH0pLnBvcHVsYXRlKCdhcnRpc3RJZCcpLnBvcHVsYXRlKCdzb25nSWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kU29uZ3NCeUFydGlzdElkKGFydGlzdElkKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFNvbmcuZmluZCh7IGFydGlzdElkOmFydGlzdElkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZUFydGlzdFJveWFsdHkoYXJ0aXN0SWQsIGZ1bGxSb3lhbHR5LCB0b3RhbFJveWFsdHlQYWlkLCB0b3RhbFJveWFsdHlEdWUsIHRvdGFsU3RyZWFtcykge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBBcnRpc3QuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgICAgICAgeyBfaWQ6IGFydGlzdElkIH0sXHJcbiAgICAgICAgICAgIHsgZnVsbFJveWFsdHksIHRvdGFsUm95YWx0eVBhaWQsIHRvdGFsUm95YWx0eUR1ZSwgdG90YWxTdHJlYW1zIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSb3lhbHR5UmVwb3NpdG9yeTtcclxuIl0sIm1hcHBpbmdzIjoibWhFQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLHdCQUF3QixDQUFDLEVBQ2pELEtBQU0sQ0FBQUMsSUFBSSxFQUFBTCxjQUFBLEdBQUFHLENBQUEsTUFBQ0MsT0FBTyxDQUFDLHFCQUFxQixDQUFDLEVBQ3pDLEtBQU0sQ0FBQUUsTUFBTSxFQUFBTixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDLEVBRS9DLEtBQU0sQ0FBQUcsaUJBQWtCLENBQ3BCO0FBQ0EsS0FBTSxDQUFBQyxNQUFNQSxDQUFDQyxTQUFTLENBQUNDLFFBQVEsQ0FBQ0MsTUFBTSxDQUFFLENBQUFYLGNBQUEsR0FBQVksQ0FBQSxNQUNwQyxLQUFNLENBQUFDLE9BQU8sRUFBQWIsY0FBQSxHQUFBRyxDQUFBLE1BQUcsR0FBSSxDQUFBRCxPQUFPLENBQUMsQ0FBQ08sU0FBUyxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxDQUFDLEVBQUNYLGNBQUEsR0FBQUcsQ0FBQSxNQUV6RCxNQUFPLE1BQU0sQ0FBQVUsT0FBTyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUMvQixDQUVBO0FBQ0EsS0FBTSxDQUFBQyxRQUFRQSxDQUFDTixTQUFTLENBQUUsQ0FBQVQsY0FBQSxHQUFBWSxDQUFBLE1BQUFaLGNBQUEsR0FBQUcsQ0FBQSxNQUN0QixNQUFPLE1BQU0sQ0FBQUQsT0FBTyxDQUFDYyxPQUFPLENBQUMsQ0FBRVAsU0FBVSxDQUFDLENBQUMsQ0FDL0MsQ0FFQTtBQUNBLEtBQU0sQ0FBQVEsY0FBY0EsQ0FBQ1AsUUFBUSxDQUFFLENBQUFWLGNBQUEsR0FBQVksQ0FBQSxNQUFBWixjQUFBLEdBQUFHLENBQUEsTUFDM0JlLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDVCxRQUFRLENBQUMsbUJBQW1CLENBQUMsQ0FBQVYsY0FBQSxHQUFBRyxDQUFBLE1BQ3pDLE1BQU8sTUFBTSxDQUFBRCxPQUFPLENBQUNrQixJQUFJLENBQUMsQ0FBRVYsUUFBUSxDQUFDQSxRQUFTLENBQUMsQ0FBQyxDQUFDVyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUNBLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FDNUYsQ0FFQSxLQUFNLENBQUFDLG1CQUFtQkEsQ0FBQ1osUUFBUSxDQUFFLENBQUFWLGNBQUEsR0FBQVksQ0FBQSxNQUFBWixjQUFBLEdBQUFHLENBQUEsTUFDaEMsTUFBTyxNQUFNLENBQUFFLElBQUksQ0FBQ2UsSUFBSSxDQUFDLENBQUVWLFFBQVEsQ0FBQ0EsUUFBUyxDQUFDLENBQUMsQ0FDakQsQ0FFQSxLQUFNLENBQUFhLG1CQUFtQkEsQ0FBQ2IsUUFBUSxDQUFFYyxXQUFXLENBQUVDLGdCQUFnQixDQUFFQyxlQUFlLENBQUVDLFlBQVksQ0FBRSxDQUFBM0IsY0FBQSxHQUFBWSxDQUFBLE1BQUFaLGNBQUEsR0FBQUcsQ0FBQSxNQUM5RixNQUFPLE1BQU0sQ0FBQUcsTUFBTSxDQUFDc0IsZ0JBQWdCLENBQ2hDLENBQUVDLEdBQUcsQ0FBRW5CLFFBQVMsQ0FBQyxDQUNqQixDQUFFYyxXQUFXLENBQUVDLGdCQUFnQixDQUFFQyxlQUFlLENBQUVDLFlBQWEsQ0FDbkUsQ0FBQyxDQUNMLENBRUosQ0FBQzNCLGNBQUEsR0FBQUcsQ0FBQSxPQUVEMkIsTUFBTSxDQUFDQyxPQUFPLENBQUd4QixpQkFBaUIiLCJpZ25vcmVMaXN0IjpbXX0=