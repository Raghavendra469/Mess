function cov_wpsk7hztl(){var path="C:\\capstone on friday\\Mess\\RMS\\server\\repositories\\notificationRepository.js";var hash="af908c604f61dd27435ee44c746a962adb6c0069";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\capstone on friday\\Mess\\RMS\\server\\repositories\\notificationRepository.js",statementMap:{"0":{start:{line:2,column:21},end:{line:2,column:59}},"1":{start:{line:7,column:25},end:{line:7,column:59}},"2":{start:{line:8,column:4},end:{line:8,column:37}},"3":{start:{line:13,column:4},end:{line:13,column:47}},"4":{start:{line:18,column:25},end:{line:22,column:5}},"5":{start:{line:23,column:4},end:{line:23,column:34}},"6":{start:{line:23,column:22},end:{line:23,column:34}},"7":{start:{line:24,column:4},end:{line:24,column:56}},"8":{start:{line:25,column:4},end:{line:25,column:24}},"9":{start:{line:28,column:4},end:{line:28,column:40}},"10":{start:{line:32,column:0},end:{line:32,column:40}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:33},end:{line:9,column:3}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:29},end:{line:14,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:26,column:3}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:14},end:{line:29,column:3}},line:27}},branchMap:{"0":{loc:{start:{line:23,column:4},end:{line:23,column:34}},type:"if",locations:[{start:{line:23,column:4},end:{line:23,column:34}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"af908c604f61dd27435ee44c746a962adb6c0069"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_wpsk7hztl=function(){return actualCoverage;};}return actualCoverage;}cov_wpsk7hztl();// notificationRepository.js
const Notification=(cov_wpsk7hztl().s[0]++,require('../models/notificationModel'));// The Mongoose model
class NotificationRepository{// Create a new notification
async create(notificationData){cov_wpsk7hztl().f[0]++;const notification=(cov_wpsk7hztl().s[1]++,new Notification(notificationData));cov_wpsk7hztl().s[2]++;return await notification.save();// Save to DB
}// Get notifications by user ID
async findByUserId(userId){cov_wpsk7hztl().f[1]++;cov_wpsk7hztl().s[3]++;return await Notification.find({userId});// Fetch from DB
}// Mark notification as read and delete it
async markAsReadAndDelete(notificationId){cov_wpsk7hztl().f[2]++;const notification=(cov_wpsk7hztl().s[4]++,await Notification.findByIdAndUpdate(notificationId,{isRead:true},{new:true}));cov_wpsk7hztl().s[5]++;if(!notification){cov_wpsk7hztl().b[0][0]++;cov_wpsk7hztl().s[6]++;return null;}else{cov_wpsk7hztl().b[0][1]++;}cov_wpsk7hztl().s[7]++;await Notification.findOneAndDelete(notificationId);// Delete after marking as read
cov_wpsk7hztl().s[8]++;return notification;// Return the updated notification
}catch(error){cov_wpsk7hztl().f[3]++;cov_wpsk7hztl().s[9]++;throw new Error(`${error.message}`);}}cov_wpsk7hztl().s[10]++;module.exports=NotificationRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfd3BzazdoenRsIiwiYWN0dWFsQ292ZXJhZ2UiLCJOb3RpZmljYXRpb24iLCJzIiwicmVxdWlyZSIsIk5vdGlmaWNhdGlvblJlcG9zaXRvcnkiLCJjcmVhdGUiLCJub3RpZmljYXRpb25EYXRhIiwiZiIsIm5vdGlmaWNhdGlvbiIsInNhdmUiLCJmaW5kQnlVc2VySWQiLCJ1c2VySWQiLCJmaW5kIiwibWFya0FzUmVhZEFuZERlbGV0ZSIsIm5vdGlmaWNhdGlvbklkIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJpc1JlYWQiLCJuZXciLCJiIiwiZmluZE9uZUFuZERlbGV0ZSIsImNhdGNoIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsibm90aWZpY2F0aW9uUmVwb3NpdG9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBub3RpZmljYXRpb25SZXBvc2l0b3J5LmpzXHJcbmNvbnN0IE5vdGlmaWNhdGlvbiA9IHJlcXVpcmUoJy4uL21vZGVscy9ub3RpZmljYXRpb25Nb2RlbCcpOyAvLyBUaGUgTW9uZ29vc2UgbW9kZWxcclxuXHJcbmNsYXNzIE5vdGlmaWNhdGlvblJlcG9zaXRvcnkge1xyXG4gIC8vIENyZWF0ZSBhIG5ldyBub3RpZmljYXRpb25cclxuICBhc3luYyBjcmVhdGUobm90aWZpY2F0aW9uRGF0YSkge1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbihub3RpZmljYXRpb25EYXRhKTtcclxuICAgIHJldHVybiBhd2FpdCBub3RpZmljYXRpb24uc2F2ZSgpOyAvLyBTYXZlIHRvIERCXHJcbiAgfVxyXG5cclxuICAvLyBHZXQgbm90aWZpY2F0aW9ucyBieSB1c2VyIElEXHJcbiAgYXN5bmMgZmluZEJ5VXNlcklkKHVzZXJJZCkge1xyXG4gICAgcmV0dXJuIGF3YWl0IE5vdGlmaWNhdGlvbi5maW5kKHsgdXNlcklkIH0pOyAvLyBGZXRjaCBmcm9tIERCXHJcbiAgfVxyXG5cclxuICAvLyBNYXJrIG5vdGlmaWNhdGlvbiBhcyByZWFkIGFuZCBkZWxldGUgaXRcclxuICBhc3luYyBtYXJrQXNSZWFkQW5kRGVsZXRlKG5vdGlmaWNhdGlvbklkKSB7XHJcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBhd2FpdCBOb3RpZmljYXRpb24uZmluZEJ5SWRBbmRVcGRhdGUoXHJcbiAgICAgIG5vdGlmaWNhdGlvbklkLFxyXG4gICAgICB7IGlzUmVhZDogdHJ1ZSB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSB9XHJcbiAgICApO1xyXG4gICAgaWYoIW5vdGlmaWNhdGlvbikgcmV0dXJuIG51bGw7XHJcbiAgICBhd2FpdCBOb3RpZmljYXRpb24uZmluZE9uZUFuZERlbGV0ZShub3RpZmljYXRpb25JZCk7IC8vIERlbGV0ZSBhZnRlciBtYXJraW5nIGFzIHJlYWRcclxuICAgIHJldHVybiBub3RpZmljYXRpb247IC8vIFJldHVybiB0aGUgdXBkYXRlZCBub3RpZmljYXRpb25cclxuICB9XHJcbiAgY2F0Y2goZXJyb3Ipe1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE5vdGlmaWNhdGlvblJlcG9zaXRvcnk7XHJcbiJdLCJtYXBwaW5ncyI6IjBtRUFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWjtBQUNBLEtBQU0sQ0FBQUUsWUFBWSxFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLDZCQUE2QixDQUFDLEVBQUU7QUFFN0QsS0FBTSxDQUFBQyxzQkFBdUIsQ0FDM0I7QUFDQSxLQUFNLENBQUFDLE1BQU1BLENBQUNDLGdCQUFnQixDQUFFLENBQUFQLGFBQUEsR0FBQVEsQ0FBQSxNQUM3QixLQUFNLENBQUFDLFlBQVksRUFBQVQsYUFBQSxHQUFBRyxDQUFBLE1BQUcsR0FBSSxDQUFBRCxZQUFZLENBQUNLLGdCQUFnQixDQUFDLEVBQUNQLGFBQUEsR0FBQUcsQ0FBQSxNQUN4RCxNQUFPLE1BQU0sQ0FBQU0sWUFBWSxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFFO0FBQ3BDLENBRUE7QUFDQSxLQUFNLENBQUFDLFlBQVlBLENBQUNDLE1BQU0sQ0FBRSxDQUFBWixhQUFBLEdBQUFRLENBQUEsTUFBQVIsYUFBQSxHQUFBRyxDQUFBLE1BQ3pCLE1BQU8sTUFBTSxDQUFBRCxZQUFZLENBQUNXLElBQUksQ0FBQyxDQUFFRCxNQUFPLENBQUMsQ0FBQyxDQUFFO0FBQzlDLENBRUE7QUFDQSxLQUFNLENBQUFFLG1CQUFtQkEsQ0FBQ0MsY0FBYyxDQUFFLENBQUFmLGFBQUEsR0FBQVEsQ0FBQSxNQUN4QyxLQUFNLENBQUFDLFlBQVksRUFBQVQsYUFBQSxHQUFBRyxDQUFBLE1BQUcsS0FBTSxDQUFBRCxZQUFZLENBQUNjLGlCQUFpQixDQUN2REQsY0FBYyxDQUNkLENBQUVFLE1BQU0sQ0FBRSxJQUFLLENBQUMsQ0FDaEIsQ0FBRUMsR0FBRyxDQUFFLElBQUssQ0FDZCxDQUFDLEVBQUNsQixhQUFBLEdBQUFHLENBQUEsTUFDRixHQUFHLENBQUNNLFlBQVksQ0FBRSxDQUFBVCxhQUFBLEdBQUFtQixDQUFBLFNBQUFuQixhQUFBLEdBQUFHLENBQUEsWUFBTyxLQUFJLEVBQUMsS0FBQUgsYUFBQSxHQUFBbUIsQ0FBQSxVQUFBbkIsYUFBQSxHQUFBRyxDQUFBLE1BQzlCLEtBQU0sQ0FBQUQsWUFBWSxDQUFDa0IsZ0JBQWdCLENBQUNMLGNBQWMsQ0FBQyxDQUFFO0FBQUFmLGFBQUEsR0FBQUcsQ0FBQSxNQUNyRCxNQUFPLENBQUFNLFlBQVksQ0FBRTtBQUN2QixDQUNBWSxLQUFLQSxDQUFDQyxLQUFLLENBQUMsQ0FBQXRCLGFBQUEsR0FBQVEsQ0FBQSxNQUFBUixhQUFBLEdBQUFHLENBQUEsTUFDVixLQUFNLElBQUksQ0FBQW9CLEtBQUssQ0FBQyxHQUFHRCxLQUFLLENBQUNFLE9BQU8sRUFBRSxDQUFDLENBQ3JDLENBQ0YsQ0FBQ3hCLGFBQUEsR0FBQUcsQ0FBQSxPQUVEc0IsTUFBTSxDQUFDQyxPQUFPLENBQUdyQixzQkFBc0IiLCJpZ25vcmVMaXN0IjpbXX0=