function cov_105ots8d8i(){var path="C:\\final project all things done\\server\\collaborationAndAlerts\\repositories\\notificationRepository.js";var hash="4a843a8520655b777069355f02d6516562979d62";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\final project all things done\\server\\collaborationAndAlerts\\repositories\\notificationRepository.js",statementMap:{"0":{start:{line:2,column:21},end:{line:2,column:59}},"1":{start:{line:7,column:25},end:{line:7,column:59}},"2":{start:{line:8,column:4},end:{line:8,column:37}},"3":{start:{line:13,column:4},end:{line:13,column:47}},"4":{start:{line:18,column:4},end:{line:31,column:3}},"5":{start:{line:19,column:25},end:{line:23,column:5}},"6":{start:{line:24,column:4},end:{line:24,column:34}},"7":{start:{line:24,column:22},end:{line:24,column:34}},"8":{start:{line:25,column:4},end:{line:25,column:62}},"9":{start:{line:26,column:4},end:{line:26,column:24}},"10":{start:{line:30,column:4},end:{line:30,column:40}},"11":{start:{line:34,column:0},end:{line:34,column:40}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:33},end:{line:9,column:3}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:29},end:{line:14,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:32,column:1}},line:17}},branchMap:{"0":{loc:{start:{line:24,column:4},end:{line:24,column:34}},type:"if",locations:[{start:{line:24,column:4},end:{line:24,column:34}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4a843a8520655b777069355f02d6516562979d62"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_105ots8d8i=function(){return actualCoverage;};}return actualCoverage;}cov_105ots8d8i();// notificationRepository.js
const Notification=(cov_105ots8d8i().s[0]++,require('../models/notificationModel'));// The Mongoose model
class NotificationRepository{// Create a new notification
async create(notificationData){cov_105ots8d8i().f[0]++;const notification=(cov_105ots8d8i().s[1]++,new Notification(notificationData));cov_105ots8d8i().s[2]++;return await notification.save();// Save to DB
}// Get notifications by user ID
async findByUserId(userId){cov_105ots8d8i().f[1]++;cov_105ots8d8i().s[3]++;return await Notification.find({userId});// Fetch from DB
}// Mark notification as read and delete it
async markAsReadAndDelete(notificationId){cov_105ots8d8i().f[2]++;cov_105ots8d8i().s[4]++;try{const notification=(cov_105ots8d8i().s[5]++,await Notification.findByIdAndUpdate(notificationId,{isRead:true},{new:true}));cov_105ots8d8i().s[6]++;if(!notification){cov_105ots8d8i().b[0][0]++;cov_105ots8d8i().s[7]++;return null;}else{cov_105ots8d8i().b[0][1]++;}cov_105ots8d8i().s[8]++;await Notification.findOneAndDelete({_id:notificationId});// Delete after marking as read
cov_105ots8d8i().s[9]++;return notification;// Return the updated notification
}catch(error){cov_105ots8d8i().s[10]++;throw new Error(`${error.message}`);}}}cov_105ots8d8i().s[11]++;module.exports=NotificationRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTA1b3RzOGQ4aSIsImFjdHVhbENvdmVyYWdlIiwiTm90aWZpY2F0aW9uIiwicyIsInJlcXVpcmUiLCJOb3RpZmljYXRpb25SZXBvc2l0b3J5IiwiY3JlYXRlIiwibm90aWZpY2F0aW9uRGF0YSIsImYiLCJub3RpZmljYXRpb24iLCJzYXZlIiwiZmluZEJ5VXNlcklkIiwidXNlcklkIiwiZmluZCIsIm1hcmtBc1JlYWRBbmREZWxldGUiLCJub3RpZmljYXRpb25JZCIsImZpbmRCeUlkQW5kVXBkYXRlIiwiaXNSZWFkIiwibmV3IiwiYiIsImZpbmRPbmVBbmREZWxldGUiLCJfaWQiLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJub3RpZmljYXRpb25SZXBvc2l0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG5vdGlmaWNhdGlvblJlcG9zaXRvcnkuanNcclxuY29uc3QgTm90aWZpY2F0aW9uID0gcmVxdWlyZSgnLi4vbW9kZWxzL25vdGlmaWNhdGlvbk1vZGVsJyk7IC8vIFRoZSBNb25nb29zZSBtb2RlbFxyXG5cclxuY2xhc3MgTm90aWZpY2F0aW9uUmVwb3NpdG9yeSB7XHJcbiAgLy8gQ3JlYXRlIGEgbmV3IG5vdGlmaWNhdGlvblxyXG4gIGFzeW5jIGNyZWF0ZShub3RpZmljYXRpb25EYXRhKSB7XHJcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbkRhdGEpO1xyXG4gICAgcmV0dXJuIGF3YWl0IG5vdGlmaWNhdGlvbi5zYXZlKCk7IC8vIFNhdmUgdG8gREJcclxuICB9XHJcblxyXG4gIC8vIEdldCBub3RpZmljYXRpb25zIGJ5IHVzZXIgSURcclxuICBhc3luYyBmaW5kQnlVc2VySWQodXNlcklkKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgTm90aWZpY2F0aW9uLmZpbmQoeyB1c2VySWQgfSk7IC8vIEZldGNoIGZyb20gREJcclxuICB9XHJcblxyXG4gIC8vIE1hcmsgbm90aWZpY2F0aW9uIGFzIHJlYWQgYW5kIGRlbGV0ZSBpdFxyXG4gIGFzeW5jIG1hcmtBc1JlYWRBbmREZWxldGUobm90aWZpY2F0aW9uSWQpIHtcclxuICAgIHRyeXtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGF3YWl0IE5vdGlmaWNhdGlvbi5maW5kQnlJZEFuZFVwZGF0ZShcclxuICAgICAgbm90aWZpY2F0aW9uSWQsXHJcbiAgICAgIHsgaXNSZWFkOiB0cnVlIH0sXHJcbiAgICAgIHsgbmV3OiB0cnVlIH1cclxuICAgICk7XHJcbiAgICBpZighbm90aWZpY2F0aW9uKSByZXR1cm4gbnVsbDtcclxuICAgIGF3YWl0IE5vdGlmaWNhdGlvbi5maW5kT25lQW5kRGVsZXRlKHtfaWQ6bm90aWZpY2F0aW9uSWR9KTsgLy8gRGVsZXRlIGFmdGVyIG1hcmtpbmcgYXMgcmVhZFxyXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbjsgLy8gUmV0dXJuIHRoZSB1cGRhdGVkIG5vdGlmaWNhdGlvblxyXG4gIH1cclxuXHJcbiAgY2F0Y2goZXJyb3Ipe1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgfVxyXG59XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBOb3RpZmljYXRpb25SZXBvc2l0b3J5O1xyXG4iXSwibWFwcGluZ3MiOiJra0VBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlo7QUFDQSxLQUFNLENBQUFFLFlBQVksRUFBQUYsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxFQUFFO0FBRTdELEtBQU0sQ0FBQUMsc0JBQXVCLENBQzNCO0FBQ0EsS0FBTSxDQUFBQyxNQUFNQSxDQUFDQyxnQkFBZ0IsQ0FBRSxDQUFBUCxjQUFBLEdBQUFRLENBQUEsTUFDN0IsS0FBTSxDQUFBQyxZQUFZLEVBQUFULGNBQUEsR0FBQUcsQ0FBQSxNQUFHLEdBQUksQ0FBQUQsWUFBWSxDQUFDSyxnQkFBZ0IsQ0FBQyxFQUFDUCxjQUFBLEdBQUFHLENBQUEsTUFDeEQsTUFBTyxNQUFNLENBQUFNLFlBQVksQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBRTtBQUNwQyxDQUVBO0FBQ0EsS0FBTSxDQUFBQyxZQUFZQSxDQUFDQyxNQUFNLENBQUUsQ0FBQVosY0FBQSxHQUFBUSxDQUFBLE1BQUFSLGNBQUEsR0FBQUcsQ0FBQSxNQUN6QixNQUFPLE1BQU0sQ0FBQUQsWUFBWSxDQUFDVyxJQUFJLENBQUMsQ0FBRUQsTUFBTyxDQUFDLENBQUMsQ0FBRTtBQUM5QyxDQUVBO0FBQ0EsS0FBTSxDQUFBRSxtQkFBbUJBLENBQUNDLGNBQWMsQ0FBRSxDQUFBZixjQUFBLEdBQUFRLENBQUEsTUFBQVIsY0FBQSxHQUFBRyxDQUFBLE1BQ3hDLEdBQUcsQ0FDSCxLQUFNLENBQUFNLFlBQVksRUFBQVQsY0FBQSxHQUFBRyxDQUFBLE1BQUcsS0FBTSxDQUFBRCxZQUFZLENBQUNjLGlCQUFpQixDQUN2REQsY0FBYyxDQUNkLENBQUVFLE1BQU0sQ0FBRSxJQUFLLENBQUMsQ0FDaEIsQ0FBRUMsR0FBRyxDQUFFLElBQUssQ0FDZCxDQUFDLEVBQUNsQixjQUFBLEdBQUFHLENBQUEsTUFDRixHQUFHLENBQUNNLFlBQVksQ0FBRSxDQUFBVCxjQUFBLEdBQUFtQixDQUFBLFNBQUFuQixjQUFBLEdBQUFHLENBQUEsWUFBTyxLQUFJLEVBQUMsS0FBQUgsY0FBQSxHQUFBbUIsQ0FBQSxVQUFBbkIsY0FBQSxHQUFBRyxDQUFBLE1BQzlCLEtBQU0sQ0FBQUQsWUFBWSxDQUFDa0IsZ0JBQWdCLENBQUMsQ0FBQ0MsR0FBRyxDQUFDTixjQUFjLENBQUMsQ0FBQyxDQUFFO0FBQUFmLGNBQUEsR0FBQUcsQ0FBQSxNQUMzRCxNQUFPLENBQUFNLFlBQVksQ0FBRTtBQUN2QixDQUVBLE1BQU1hLEtBQUssQ0FBQyxDQUFBdEIsY0FBQSxHQUFBRyxDQUFBLE9BQ1YsS0FBTSxJQUFJLENBQUFvQixLQUFLLENBQUMsR0FBR0QsS0FBSyxDQUFDRSxPQUFPLEVBQUUsQ0FBQyxDQUNyQyxDQUNGLENBQ0EsQ0FBQ3hCLGNBQUEsR0FBQUcsQ0FBQSxPQUNEc0IsTUFBTSxDQUFDQyxPQUFPLENBQUdyQixzQkFBc0IiLCJpZ25vcmVMaXN0IjpbXX0=